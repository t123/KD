@inherits BaseView

<MudElement HtmlTag="div">
    @if (State.Value.TabMapping.ContainsKey(Tab))
    {
        var view = State.Value.TabMapping[Tab];
        var items = view.Items.AsQueryable();

        if (!string.IsNullOrWhiteSpace(SearchText))
        {
            items = items.Where(x => x.Name.Contains(SearchText, StringComparison.InvariantCultureIgnoreCase));
        }

        <GridHeader Label="Mutating Webhook Configurations" View="view" OnRefresh="Fetch" ShowSearch="ShowSearch" OnSearch="PerformSearch" ItemCount="@items.Count()" RefreshTimer="Timer">
        </GridHeader>

        <MudDataGrid Items="items" T="MutatingWebhookConfigurationViewModel" SortMode="SortMode.Single" RowContextMenuClick="ContextMenuClick" Hover="true" ColumnResizeMode="ResizeMode.Column" FixedHeader="true" Height="@BaseView.TableHeight">
            <Columns>
                <TemplateColumn Title="Name" SortBy="x => x.Name" Sortable="true">
                    <CellTemplate>
                        <button @onclick="@(() => OpenProperties(context.Item))">
                            @context.Item.Name
                        </button>
                    </CellTemplate>
                </TemplateColumn>
                <PropertyColumn Property="i => i.Namespace" />
            </Columns>
        </MudDataGrid>
        <MudMenu @ref="_contextMenu" PositionAtCursor="true">
            <MudMenuItem Icon="@Icons.Material.Outlined.ContentCopy" OnClick="(e) => CopyToClipboard(_contextRow.Name)">Copy @_contextRow.Name</MudMenuItem>
            <MudMenuItem Icon="@Icons.Material.Outlined.ContentCopy" OnClick="(e) => CopyToClipboard(_contextRow.Namespace)">Copy @_contextRow.Namespace</MudMenuItem>
            <MudMenuItem Icon="@Icons.Material.Outlined.Edit" OnClick="(e) => OpenEditor(Tab, _contextRow.Name, _contextRow.Namespace)">Edit @_contextRow.Name</MudMenuItem>
            <MudMenuItem Icon="@Icons.Material.Filled.DeleteForever" IconColor="Color.Error">Delete @_contextRow.Name</MudMenuItem>
        </MudMenu>
    }
</MudElement>